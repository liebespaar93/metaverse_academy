---
title: input
description: |-
    ë‚´ìš©ì…ë ¥
date: 2024-05-02T21:05:01+09:00
preview: ì´ë¯¸ì§€ ì£¼ì†Œ
draft: false
tags:
    - metaverse academy
    - unreal
    - xr unreal
    - editor
    - cpp
    - input
categories:
    - unreal
---

import { Callout } from 'nextra/components'

<Callout emoji="ğŸ‘¾">
í‚¤ ì„¤ì •ì˜ ê²½ìš° ì•„ë˜ ë§í¬ë¥¼ ì°¸ê³ í•˜ê¸° ë°”ë€ë‹¤.\
[blueprint keybind](/unreal/blueprint/blueprint-keybind#input-key-binding-ì„¤ì •)
</Callout>

í‚¤ ê°’ì„ ì½”ë“œí™” í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.


```cpp filename="PlayerPawn.h"
// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Pawn.h"
#include "PlayerPawn.generated.h"

UCLASS()
class MYSECONDPROJECT_API APlayerPawn : public APawn
{
	GENERATED_BODY()

public:
	// Sets default values for this pawn's properties
	APlayerPawn();

protected:
	// Called when the game starts or when spawned
	virtual void BeginPlay() override;

public:	
	// Called every frame
	virtual void Tick(float DeltaTime) override;

	// Called to bind functionality to input
	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;
    // Box component
    UPROPERTY(EditAnywhere)
    class  UBoxComponent* compBox;
    
    // StaticMesh component
    UPROPERTY(EditAnywhere)
    class UStaticMeshComponent* compMesh;

	// Horizonal & Vertical value;
	float h;
	float v;
	float speed = 100;
	
	// A, D Key bind 
	void InputHorizonal(float value);
	// W, S Key bind
	void InputVertical(float value);
};
```

í—¤ë”íŒŒì¼ì˜ ê²½ìš° í‚¤ë¥¼ ë‹´ì„ ê°’ê³¼ ê·¸ì— ë”°ë¥¸ í•¨ìˆ˜ë¥¼ ì •ì˜ í•œë‹¤.

```cpp filename="PlayerPawn.cpp"
// Fill out your copyright notice in the Description page of Project Settings.

#include "PlayerPawn.h"
#include "Components/BoxComponent.h"

// Sets default values
APlayerPawn::APlayerPawn()
{
 	// Set this pawn to call Tick() every frame.  You can turn this off to improve performance if you don't need it.
	PrimaryActorTick.bCanEverTick = true;
    
    // Box Component Create
    compBox = CreateDefaultSubobject<UBoxComponent>(TEXT("BOX"));
    // Set First Component
    SetRootComponent(compBox);
    // Set Box Size
	compBox->SetBoxExtent(FVector(50,50,50));
	
    // StaticMesh Component Create
    compMesh = CreateDefaultSubobject<UStaticMeshComponent>(TEXT("MESH"));
    // Set child Component of Box Component
	compMesh->SetupAttachment(compBox);

	// Load Cube StaticMesh
	ConstructorHelpers::FObjectFinder<UStaticMesh> tempMesh(TEXT("/Script/Engine.StaticMesh'/Engine/BasicShapes/Cube.Cube'"));
	
	// Load Success
	if (tempMesh.Succeeded())
	{
		// Input staticMesh data from tempMesh
		compMesh->SetStaticMesh(tempMesh.Object);
	}
	// Load Material
	ConstructorHelpers::FObjectFinder<UMaterial> tempMat(TEXT("/Script/Engine.Material'/Engine/BasicShapes/BasicShapeMaterial.BasicShapeMaterial'"));

	if (tempMat.Succeeded())
	{
		// Input compMesh data from tempMat
		compMesh->SetMaterial(0, tempMat.Object);
	}
}

// Called when the game starts or when spawned
void APlayerPawn::BeginPlay()
{
	Super::BeginPlay();
	
}

// Called every frame
void APlayerPawn::Tick(float DeltaTime)
{
	Super::Tick(DeltaTime);

	// Set Axis
	FVector dirH = FVector::YAxisVector * this->h;
	FVector dirV = FVector::XAxisVector * this->v;
	FVector dir = dirH + dirV;
	
	// Axis to be normalize
	dir.Normalize();
	
	// move to Direction
	// P = P0 + vt  (v : dir * speed
	FVector p0 = GetActorLocation();
	FVector vt = dir * this->speed * DeltaTime;
	SetActorLocation(p0 + vt);
}

// Called to bind functionality to input
void APlayerPawn::SetupPlayerInputComponent(UInputComponent* PlayerInputComponent)
{
	Super::SetupPlayerInputComponent(PlayerInputComponent);

	// Set InputHorizonal
	PlayerInputComponent->BindAxis(TEXT("Horizontal"),this, &APlayerPawn::InputHorizonal);
	// Set InputVertical
	PlayerInputComponent->BindAxis(TEXT("Vertical"),this, &APlayerPawn::InputVertical);
}

void APlayerPawn::InputHorizonal(float value)
{
	// UE_LOG(LogTemp, Warning, TEXT("H : %f"),  value)
	
	this->h = value;
}

void APlayerPawn::InputVertical(float value)
{
	// UE_LOG(LogTemp, Warning, TEXT("V : %f"),  value)
	this->v = value;
}
```

cpp ì—ì„œ í‚¤ì—ëŒ€í•œ ì„¤ì •ë¯ˆ ë¶€ë¶„ì‹ ë‚˜ëˆ„ì–´ ì„¤ëª…í•´ë³´ì

```cpp
void APlayerPawn::InputHorizonal(float value)
{
	this->h = value;
}
 
void APlayerPawn::InputVertical(float value)
{
	this->v = value;
}
```
ë‘í•¨ìˆ˜ëŠ” setê³¼ ê°™ì€ ì—­í™•ì„ í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. ë“¤ì–´ì˜¨ ê°’ì„ class ë³€ìˆ˜ì— ì •ì¥í•œë‹¤.

```cpp
void APlayerPawn::SetupPlayerInputComponent(UInputComponent* PlayerInputComponent)
{
	Super::SetupPlayerInputComponent(PlayerInputComponent);
 
	// Set InputHorizonal
	PlayerInputComponent->BindAxis(TEXT("Horizontal"),this, &APlayerPawn::InputHorizonal);
	// Set InputVertical
	PlayerInputComponent->BindAxis(TEXT("Vertical"),this, &APlayerPawn::InputVertical);	
}
```

bindëœ ê°’ì´ë¦„ì´ ë³€í™”í• ë•Œ ê°ì§€í•˜ì—¬ í•œ ì—‘í„°ì— í•¨ìˆ˜ë¥¼ ì ìš©í•˜ëŠ” ì‘ì—…ì„ í•œë‹¤.\
1. ì²«ë²ˆì§¸ ì¸ìë¡œëŠ” ë°”ì¸ë“œ ë˜ëŠ” ëª…ì¹­
2. ë‘ë²ˆì§¸ ì¸ìë¡œëŠ” ì˜í–¥ì„ ë°›ì„ í´ë ˆìŠ¤
3. 3ë²ˆì œë¡œëŠ” ì ìš©í•˜ë ¤ëŠ” í•¨ìˆ˜ (í•¨ìˆ˜ì—ëŠ” valueê°’ì´ ì£¼ì–´ì§€ë©° ê·¸ì— ë”°ë¥¸ ë¡œì§ì´ ìˆì–´ì•¼ í•œë‹¤.)

ì´ë¡œì„œ ë°©í–¥ì„ ì§€ì •í•´ ì¤„ ìˆ˜ ìˆê²Œ ëœë‹¤.

```cpp

void APlayerPawn::Tick(float DeltaTime)
{
	Super::Tick(DeltaTime);

	// Set Axis
	FVector dirH = FVector::YAxisVector * this->h;
	FVector dirV = FVector::XAxisVector * this->v;
	FVector dir = dirH + dirV;
	
	// Axis to be normalize
	dir.Normalize();
	
	// move to Direction
	// P = P0 + vt  (v : dir * speed
	FVector p0 = GetActorLocation();
	FVector vt = dir * this->speed * DeltaTime;
	SetActorLocation(p0 + vt);
}
```

í‹±ì— ë”°ë¼ ì§€ì •ëœ ë°©í˜•ìœ¼ë¡œ ì›€ì§ì¼ ìˆ˜ ìˆë„ë¡ ìœ„ì¹˜ë¥¼ ì´ë™ ì‹œì¼œì¤€ë‹¤.

ì´ëŸ¬í•œ ì„¤ì •ìœ¼ë¡œ í‚¤ë¥¼ ë°”ì¸ë“œí•˜ì—¬ ì›€ì§ì¼ ìˆ˜ ìˆë‹¤.

![unreal-cpp-class-keybind-move](./assets/unreal-cpp-class-keybind-move.gif)